<!DOCTYPE html>
<html>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({ TeX: { extensions: ["AMSmath.js", "AMSsymbols.js"] }});
  MathJax.Hub.Config({
  TeX: {
    Macros: {
      md: "{\\text{d}}",
      dbar: "{\\text{d}}",
      bold: ["{\\bf #1}",1],
      Abs: ['\\left\\lvert #2 \\right\\rvert_{\\text{#1}}', 2, ""]
    }
  }
});
</script>
  <head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-106001791-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-106001791-2');
  </script>
  
  <meta name="google-site-verification" content="dW5mXMbkY4MK952APZMO3_VkJwk9q6Rv1O8KgPZVidE" />
  <script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({ TeX: { extensions: ["AMSmath.js", "AMSsymbols.js"] }});
  MathJax.Hub.Config({
  TeX: {
    Macros: {
      md: "{\\text{d}}",
      dbar: "{\\text{d}}",
      bold: ["{\\bf #1}",1],
      Abs: ['\\left\\lvert #2 \\right\\rvert_{\\text{#1}}', 2, ""]
    	}
  	}
	});
	</script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>How to use Python as an astronomer</title>
  <meta name="description" content="Useful ResourcesMIT课程：计算机科学“补漏”课Python for AstronomersData VisualizationBook: Fundamentals of Data VisualizationReally really nice book on principles of plot...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/blog/2019/06/HowToPython">
  <link rel="alternate" type="application/rss+xml" title="Jiaxuan Li 李嘉轩" href="http://localhost:4000/feed.xml" />
<link rel='stylesheet' id='open-sans-css'  href='//fonts.googleapis.com/css?family=Open+Sans%3A300italic%2C400italic%2C600italic%2C300%2C400%2C600&#038;subset=latin%2Clatin-ext&#038;ver=4.2.4' type='text/css' media='all' />
<link href='https://fonts.googleapis.com/css?family=Titillium+Web:600italic,600,400,400italic' rel='stylesheet' type='text/css'>



<link rel="apple-touch-icon-precomposed" sizes="57x57" href="./images/favicon/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="./images/favicon/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="./images/favicon/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="./images/favicon/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="./images/favicon/apple-touch-icon-60x60.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="./images/favicon/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="./images/favicon/apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="./images/favicon/apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="./images/favicon/favicon-196x196.png" sizes="196x196" />
<link rel="icon" type="image/png" href="./images/favicon/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="./images/favicon/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="./images/favicon/favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="./images/favicon/favicon-128.png" sizes="128x128" />
<meta name="application-name" content="&nbsp;"/>
<meta name="msapplication-TileColor" content="#FFFFFF" />
<meta name="msapplication-TileImage" content="./images/favicon/mstile-144x144.png" />
<meta name="msapplication-square70x70logo" content="./images/favicon/mstile-70x70.png" />
<meta name="msapplication-square150x150logo" content="./images/favicon/mstile-150x150.png" />
<meta name="msapplication-wide310x150logo" content="./images/favicon/mstile-310x150.png" />
<meta name="msapplication-square310x310logo" content="./images/favicon/mstile-310x310.png" />





</head>

  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>How to use Python as an astronomer | Jiaxuan Li 李嘉轩</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="How to use Python as an astronomer" />
<meta name="author" content="Jiaxuan Li" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Useful Resources MIT课程：计算机科学“补漏”课 Python for Astronomers Data Visualization Book: Fundamentals of Data Visualization Really really nice book on principles of plotting and visualizing data. Like it! I will post some content below later. Other packages for plot mpld3: renderer interactive figures (using d3) for Matplotlib code. Quite nice, though incomplete. Worth trying! Altair is a relatively new declarative visualization library for Python. It’s easy to use and makes great looking plots, however the ability to customize those plots is not nearly as powerful as in Matplotlib. plot.ly can generate nice plots - this used to be a paid service only but was recently open sourced. Looks fancy! ipympl introduces interactive widgets of matplotlib in Jupyter notebook and JupyterLab. Incredible cheat sheet for Matplotlib! `Matplotlib` cheatsheet And here are some commands in common use. %matplotlib inline %load_ext autoreload %autoreload 2 from IPython.display import clear_output plt.rcParams[&#39;figure.dpi&#39;] = 200.0 plt.rcParams[&#39;figure.facecolor&#39;] = &#39;w&#39; plt.rcParams[&#39;font.family&#39;] = &#39;serif&#39; plt.rcParams[&#39;font.size&#39;] = 25.0 plt.rcParams[&#39;text.usetex&#39;] = True fig, ax = plt.subplots(1, 2, figsize=(10, 10)) # Two columns ax.tick_params(direction=&#39;in&#39;) # Set tick direction to &#39;in&#39; ax2.get_shared_y_axes().join(ax1, ax2) # Share axis ax.axis(&#39;off&#39;) # No frame when showing images plt.savefig(&#39;xxx.png&#39;, dpi=200, bbox_inches=&#39;tight&#39;) # Save without empty margin # If you find your figure too large, pass `rasterized=True` to `plt.savefig()`. How to create a zoom-in inset in a figure? Useful Python packages in astrophysics: Here I only list several nice packages in astrophysics research. For more please check my GitHub stars and GitHub astrophysics and astronomy topics. taotie: A curated collection of resources for astrophysical research, best tutorial for anyone in this field! unagi: Search and download data from Hyper Suprime-Cam (HSC) Subaru Strategic Survey (SSP). Useful for people working with HSC data. photutils: Astropy package for source detection and photometry, basically substitutes of many IRAF functions. galsim: Galaxy image simulation tool, broadly used in weak lensing and mock tests in galaxy research. prospector: Python code for Stellar Population Inference from Spectra and SEDs. sedpy: Utilities for astronomical spectral energy distributions. healpy: It is a package dealing with data on a sphere. It can map every direction to a pixel position, and vice versa. It can also calculate power spectrum of things like CMB. Although it’s super useful, its python documentation is really unfriendly for beginners. starry: very cool package that can calculate light curves of transits and secondary eclipses of exoplanets, light curves of eclipsing binaries, rotational phase curves of exoplanets, light curves of planet-planet and planet-moon occultations, and more. A very cool tutorial: A map of the hot jupiter HD 189733b. cosmology: cosmology package based on C, written by esheldon. Fast calculate distances. It can also be replaced by astropy.cosmology. corner: A package of drawing corner diagrams of MCMC and 2d histogram. It’s very easy to use and has many options. Good tool! You can find some examples in the SN cosmology.ipynb. Song Huang also uses corner to “explore” data: plot everything with everything. It can check the dependence between variables directly. Example by Song Huang: import corner sdss_labels = [ r&#39;$u-g$&#39;, r&#39;$g-i$&#39;, r&#39;$\log \mathrm{EW}_{\mathrm{H}\alpha}$&#39;, r&#39;$\log \mathrm{EW}_{\mathrm{H}\beta}$&#39;, r&#39;$\log \mathrm{EW}_{[\mathrm{OIII}]}$&#39; ] sdss_corner = corner.corner( sdss_obs, bins=15, color=plt.get_cmap(&#39;coolwarm&#39;)(0.9), smooth=0.5, labels=sdss_labels, label_kwargs={&#39;fontsize&#39;: 22}, quantiles=[0.16, 0.5, 0.84], plot_contours=True, fill_contours=True, show_titles=True, title_kwargs={&quot;fontsize&quot;: 18}, hist_kwargs={&quot;histtype&quot;: &#39;stepfilled&#39;, &quot;alpha&quot;: 0.8, &quot;edgecolor&quot;: &quot;none&quot;}, use_math_text=True) sdss_corner.set_size_inches(14, 14) multiprocess.Pool: simple tool to run your loop tasks on multiple cores. This is embedded in python itself, and goes like below. For more complicated usage (multiple arguments as input), please refer to the documentation. from multiprocessing import Pool def run_SBP(obj): slug.run_SBP(obj) print(&#39;Number of processor to use:&#39;) n_jobs = int(input()) pool = Pool(n_jobs) pool.map(run_SBP, obj_cat) joblib: an awesome tool of building pipelines in python. Just like a superior pickle, it can dump and load functions and data (especially large data arrays) efficiently. It can also distribute loop tasks to multiple processors. See the usages below: # Parallel computing from joblib import Parallel, delayed def run_SBP(obj): slug.run_SBP(obj) n_jobs = 4 with Parallel(n_jobs=n_jobs, backend=&#39;loky&#39;) as parallel: parallel(delayed(run_SBP)(obj) for obj in obj_cat) There are various backends for this Parallel function, such as loky, threading and also multiprocessing as stated above. # Dump and load from sklearn.neighbors import KNeighborsClassifier knn = KNeighborsClassifier() knn.fit(X_train, y_train) print(metrics.classification_report(y_test, knn.predict(X_test))) # After training a classifier using scikit-learn, # you want to dump it and use it next time. import joblib joblib.dump(knn, &#39;./clf_cache/knn.joblib&#39;) # If you want to dump the file after compressing, use this. joblib.dump(knn, &#39;./clf_cache/knn.joblib.compress&#39;, compress=True) ipyparallel: Using IPython for parallel computing Tricks Useful packages fire: Python Fire is a library for automatically generating command line interfaces (CLIs) from absolutely any Python object. celluloid: Easy Matplotlib Animation Build your package How to write requirements.txt for a package How to write documentation using sphinx and publish using Readthedocs. Python Packaging User Guider (PyPI): note that when pushing your local files in dist to PyPI, you only need to do python3 -m twine upload dist/*. Don’t forget to add non-Python files in MANIFEST.in and setup.py. Jupyter Notebook &amp; Jupyter Lab No matter under macOs or Linux, or even under Windows, you’ll find that a quick check of Jupiter Notebook is hard and cumbersome. You need to open jupyter notebook in this folder to check, then terminate this thread. However, using a new tool ipynb-quicklook and a new app Jupyter Notebook Viewer, things get much more easier (under macOS and linux). Simply press space and check your notebooks! The following are some other tricks involved when using jupyter notebook. Command + click: multiple cursors in a cell. %load_ext autoreload: import the IPython extension called autoreload. Then %autoreload 2 will reload every module again automatically before executing. %%time: Magic command to time your cell for a single run. Useful! %%timeit: this command can be used to test your code’s performance. It runs your cell for many times and calculate the mean time consumed. %matplotlib inline: show Matplotlib figures inline. Useful! %matplotlib qt: show Matplotlib figures outside in a Qt interface, in which you can check positions and corresponding value of points. %run ./two-histograms.ipynb: this will run the notebook directly and shows every output from that notebook under this cell. %load ./download_tri_color_images.py: load the functions and constants defined in the input python file, and run this file. %config InlineBackend.figure_format =&#39;retina&#39;: show high resolution figures for Mac Retina screen. This won’t affect the figure which is saved, it only affect the figure which is showed using plt.show(). _ means the previous output. By adding ; in the end of a command, it will suppress the useless output of a function. Basic shell commands: ! is external shell command, and &amp; is to run this command as background. Click + control: Jupyter supports multiple cursors, similar to Sublime Text. (Use alt on Windows) %debug magic command: when you encounter an error, type this magic command in a new cell and run it. Type n to run the next line of code, type c to continue until the next breakpoint, and type q to quit. This magic command can also be used to check the value of variables, just type the name of the variable. from IPython.core.debugger import set_trace: use set_trace() to set a breakpoint in your cell or code block. The code will stop at the breakpoint and give you the chance to inspect variables. Jupyter extensions: my favorite extensions are Codefolding, Nofity and Code prettify. You can simply install it by pip install jupyter_contrib_nbextensions or conda install -c conda-forge jupyter_contrib_nbextensions. Recently I switched to jupyter lab! It is faster than jupyter notebook. Formatting strings Tutorial: https://pyformat.info. I often use length = {:.2f}.format(3.1415) or name = &quot;DECaLS_{}&quot;.format(&#39;g_band&#39;}. In Python 3.6, f-string can be used: flength = {len(obj_cat):3d}. RegEx: Regular Expression Tutorial: https://github.com/ziishaned/learn-regex. Using Tqdm to show progress See https://github.com/tqdm/tqdm/wiki/How-to-make-a-great-Progress-Bar. from slug.imutils import TqdmUpTo url = imutils.gen_url_hsc_s18a(obj[&#39;RA&#39;], obj[&#39;Dec&#39;], size * slug.HSC_pixel_scale, size * slug.HSC_pixel_scale, band)[0] #urllib.request.urlretrieve(url, filename, imutils.reporthook) with TqdmUpTo(unit=&#39;B&#39;, unit_scale=True, miniters=1, desc=prefix) as t: # all optional kwargs urllib.request.urlretrieve(url, filename=filename, reporthook=t.update_to, data=None) Unix Rsync We use rsync to transfer files between two computers. It often goes like: rsync -avz --progress jiaxuanli@kungpao.ucsc.edu:/Users/jiaxuanli/Document/xxx.fits ~/Research/ SSH SSH is a tunnel through which you can connect with another computer (with fixed IP). It often goes like: Login kungpao: ssh -A -Y jiaxuanli@kungpao.ucsc.edu. However you can set alias for this command by write alias login_kungpao=&#39;ssh -A -Y jiaxuanli@kungpao.ucsc.edu&#39; in your .bash_profile. Using the internet of kungpao: ssh -g -qfnNT -D 7070 jiaxuanli@kungpao.ucsc.edu and then set the port of SOCKS to be 7070. Using Jupiter Notebook on kungpao but control it locally: ssh -Y -N -L localhost:9999:localhost:9999 jiaxuanli@kungpao.ucsc.edu (on your laptop); jupyter notebook --no-browser --port=9999 (on your server kungpao). The SSH session may be timeout very soon, check here for solutions. SSHFS When you find that using ssh and rsync is not convenient to see what you did, you need sshfs to mount your remote server to the local directory. First, you need to download and install OSXFUSE and SSHFS on https://osxfuse.github.io (directly download the .pkg files under “Stable Releases” and then install them.) Then, you need to set a mounting folder (need to be empty). For example, mkdir ~/Research/kungpao. Finally, it goes like sshfs jiaxuanli@kungpao.ucsc.edu:/Users/jiaxuanli/ /Users/jiaxuanli/Research/kungpao/ -ovolname=kungpao. You will see a disk icon in folder ~/Research. To unmount this “disk”, type diskutil unmount ~/Research/kungpao/. Screen screen enables me to use multiple windows in the background when using ssh. Make a new screen window using screen -S Jiaxuan; then do whatever you want in that terminal; and detach that window using Ctrl-a + d. After got detached, the screen terminal is still running in the background. You can reconnect that terminal with screen -r Jiaxuan." />
<meta property="og:description" content="Useful Resources MIT课程：计算机科学“补漏”课 Python for Astronomers Data Visualization Book: Fundamentals of Data Visualization Really really nice book on principles of plotting and visualizing data. Like it! I will post some content below later. Other packages for plot mpld3: renderer interactive figures (using d3) for Matplotlib code. Quite nice, though incomplete. Worth trying! Altair is a relatively new declarative visualization library for Python. It’s easy to use and makes great looking plots, however the ability to customize those plots is not nearly as powerful as in Matplotlib. plot.ly can generate nice plots - this used to be a paid service only but was recently open sourced. Looks fancy! ipympl introduces interactive widgets of matplotlib in Jupyter notebook and JupyterLab. Incredible cheat sheet for Matplotlib! `Matplotlib` cheatsheet And here are some commands in common use. %matplotlib inline %load_ext autoreload %autoreload 2 from IPython.display import clear_output plt.rcParams[&#39;figure.dpi&#39;] = 200.0 plt.rcParams[&#39;figure.facecolor&#39;] = &#39;w&#39; plt.rcParams[&#39;font.family&#39;] = &#39;serif&#39; plt.rcParams[&#39;font.size&#39;] = 25.0 plt.rcParams[&#39;text.usetex&#39;] = True fig, ax = plt.subplots(1, 2, figsize=(10, 10)) # Two columns ax.tick_params(direction=&#39;in&#39;) # Set tick direction to &#39;in&#39; ax2.get_shared_y_axes().join(ax1, ax2) # Share axis ax.axis(&#39;off&#39;) # No frame when showing images plt.savefig(&#39;xxx.png&#39;, dpi=200, bbox_inches=&#39;tight&#39;) # Save without empty margin # If you find your figure too large, pass `rasterized=True` to `plt.savefig()`. How to create a zoom-in inset in a figure? Useful Python packages in astrophysics: Here I only list several nice packages in astrophysics research. For more please check my GitHub stars and GitHub astrophysics and astronomy topics. taotie: A curated collection of resources for astrophysical research, best tutorial for anyone in this field! unagi: Search and download data from Hyper Suprime-Cam (HSC) Subaru Strategic Survey (SSP). Useful for people working with HSC data. photutils: Astropy package for source detection and photometry, basically substitutes of many IRAF functions. galsim: Galaxy image simulation tool, broadly used in weak lensing and mock tests in galaxy research. prospector: Python code for Stellar Population Inference from Spectra and SEDs. sedpy: Utilities for astronomical spectral energy distributions. healpy: It is a package dealing with data on a sphere. It can map every direction to a pixel position, and vice versa. It can also calculate power spectrum of things like CMB. Although it’s super useful, its python documentation is really unfriendly for beginners. starry: very cool package that can calculate light curves of transits and secondary eclipses of exoplanets, light curves of eclipsing binaries, rotational phase curves of exoplanets, light curves of planet-planet and planet-moon occultations, and more. A very cool tutorial: A map of the hot jupiter HD 189733b. cosmology: cosmology package based on C, written by esheldon. Fast calculate distances. It can also be replaced by astropy.cosmology. corner: A package of drawing corner diagrams of MCMC and 2d histogram. It’s very easy to use and has many options. Good tool! You can find some examples in the SN cosmology.ipynb. Song Huang also uses corner to “explore” data: plot everything with everything. It can check the dependence between variables directly. Example by Song Huang: import corner sdss_labels = [ r&#39;$u-g$&#39;, r&#39;$g-i$&#39;, r&#39;$\log \mathrm{EW}_{\mathrm{H}\alpha}$&#39;, r&#39;$\log \mathrm{EW}_{\mathrm{H}\beta}$&#39;, r&#39;$\log \mathrm{EW}_{[\mathrm{OIII}]}$&#39; ] sdss_corner = corner.corner( sdss_obs, bins=15, color=plt.get_cmap(&#39;coolwarm&#39;)(0.9), smooth=0.5, labels=sdss_labels, label_kwargs={&#39;fontsize&#39;: 22}, quantiles=[0.16, 0.5, 0.84], plot_contours=True, fill_contours=True, show_titles=True, title_kwargs={&quot;fontsize&quot;: 18}, hist_kwargs={&quot;histtype&quot;: &#39;stepfilled&#39;, &quot;alpha&quot;: 0.8, &quot;edgecolor&quot;: &quot;none&quot;}, use_math_text=True) sdss_corner.set_size_inches(14, 14) multiprocess.Pool: simple tool to run your loop tasks on multiple cores. This is embedded in python itself, and goes like below. For more complicated usage (multiple arguments as input), please refer to the documentation. from multiprocessing import Pool def run_SBP(obj): slug.run_SBP(obj) print(&#39;Number of processor to use:&#39;) n_jobs = int(input()) pool = Pool(n_jobs) pool.map(run_SBP, obj_cat) joblib: an awesome tool of building pipelines in python. Just like a superior pickle, it can dump and load functions and data (especially large data arrays) efficiently. It can also distribute loop tasks to multiple processors. See the usages below: # Parallel computing from joblib import Parallel, delayed def run_SBP(obj): slug.run_SBP(obj) n_jobs = 4 with Parallel(n_jobs=n_jobs, backend=&#39;loky&#39;) as parallel: parallel(delayed(run_SBP)(obj) for obj in obj_cat) There are various backends for this Parallel function, such as loky, threading and also multiprocessing as stated above. # Dump and load from sklearn.neighbors import KNeighborsClassifier knn = KNeighborsClassifier() knn.fit(X_train, y_train) print(metrics.classification_report(y_test, knn.predict(X_test))) # After training a classifier using scikit-learn, # you want to dump it and use it next time. import joblib joblib.dump(knn, &#39;./clf_cache/knn.joblib&#39;) # If you want to dump the file after compressing, use this. joblib.dump(knn, &#39;./clf_cache/knn.joblib.compress&#39;, compress=True) ipyparallel: Using IPython for parallel computing Tricks Useful packages fire: Python Fire is a library for automatically generating command line interfaces (CLIs) from absolutely any Python object. celluloid: Easy Matplotlib Animation Build your package How to write requirements.txt for a package How to write documentation using sphinx and publish using Readthedocs. Python Packaging User Guider (PyPI): note that when pushing your local files in dist to PyPI, you only need to do python3 -m twine upload dist/*. Don’t forget to add non-Python files in MANIFEST.in and setup.py. Jupyter Notebook &amp; Jupyter Lab No matter under macOs or Linux, or even under Windows, you’ll find that a quick check of Jupiter Notebook is hard and cumbersome. You need to open jupyter notebook in this folder to check, then terminate this thread. However, using a new tool ipynb-quicklook and a new app Jupyter Notebook Viewer, things get much more easier (under macOS and linux). Simply press space and check your notebooks! The following are some other tricks involved when using jupyter notebook. Command + click: multiple cursors in a cell. %load_ext autoreload: import the IPython extension called autoreload. Then %autoreload 2 will reload every module again automatically before executing. %%time: Magic command to time your cell for a single run. Useful! %%timeit: this command can be used to test your code’s performance. It runs your cell for many times and calculate the mean time consumed. %matplotlib inline: show Matplotlib figures inline. Useful! %matplotlib qt: show Matplotlib figures outside in a Qt interface, in which you can check positions and corresponding value of points. %run ./two-histograms.ipynb: this will run the notebook directly and shows every output from that notebook under this cell. %load ./download_tri_color_images.py: load the functions and constants defined in the input python file, and run this file. %config InlineBackend.figure_format =&#39;retina&#39;: show high resolution figures for Mac Retina screen. This won’t affect the figure which is saved, it only affect the figure which is showed using plt.show(). _ means the previous output. By adding ; in the end of a command, it will suppress the useless output of a function. Basic shell commands: ! is external shell command, and &amp; is to run this command as background. Click + control: Jupyter supports multiple cursors, similar to Sublime Text. (Use alt on Windows) %debug magic command: when you encounter an error, type this magic command in a new cell and run it. Type n to run the next line of code, type c to continue until the next breakpoint, and type q to quit. This magic command can also be used to check the value of variables, just type the name of the variable. from IPython.core.debugger import set_trace: use set_trace() to set a breakpoint in your cell or code block. The code will stop at the breakpoint and give you the chance to inspect variables. Jupyter extensions: my favorite extensions are Codefolding, Nofity and Code prettify. You can simply install it by pip install jupyter_contrib_nbextensions or conda install -c conda-forge jupyter_contrib_nbextensions. Recently I switched to jupyter lab! It is faster than jupyter notebook. Formatting strings Tutorial: https://pyformat.info. I often use length = {:.2f}.format(3.1415) or name = &quot;DECaLS_{}&quot;.format(&#39;g_band&#39;}. In Python 3.6, f-string can be used: flength = {len(obj_cat):3d}. RegEx: Regular Expression Tutorial: https://github.com/ziishaned/learn-regex. Using Tqdm to show progress See https://github.com/tqdm/tqdm/wiki/How-to-make-a-great-Progress-Bar. from slug.imutils import TqdmUpTo url = imutils.gen_url_hsc_s18a(obj[&#39;RA&#39;], obj[&#39;Dec&#39;], size * slug.HSC_pixel_scale, size * slug.HSC_pixel_scale, band)[0] #urllib.request.urlretrieve(url, filename, imutils.reporthook) with TqdmUpTo(unit=&#39;B&#39;, unit_scale=True, miniters=1, desc=prefix) as t: # all optional kwargs urllib.request.urlretrieve(url, filename=filename, reporthook=t.update_to, data=None) Unix Rsync We use rsync to transfer files between two computers. It often goes like: rsync -avz --progress jiaxuanli@kungpao.ucsc.edu:/Users/jiaxuanli/Document/xxx.fits ~/Research/ SSH SSH is a tunnel through which you can connect with another computer (with fixed IP). It often goes like: Login kungpao: ssh -A -Y jiaxuanli@kungpao.ucsc.edu. However you can set alias for this command by write alias login_kungpao=&#39;ssh -A -Y jiaxuanli@kungpao.ucsc.edu&#39; in your .bash_profile. Using the internet of kungpao: ssh -g -qfnNT -D 7070 jiaxuanli@kungpao.ucsc.edu and then set the port of SOCKS to be 7070. Using Jupiter Notebook on kungpao but control it locally: ssh -Y -N -L localhost:9999:localhost:9999 jiaxuanli@kungpao.ucsc.edu (on your laptop); jupyter notebook --no-browser --port=9999 (on your server kungpao). The SSH session may be timeout very soon, check here for solutions. SSHFS When you find that using ssh and rsync is not convenient to see what you did, you need sshfs to mount your remote server to the local directory. First, you need to download and install OSXFUSE and SSHFS on https://osxfuse.github.io (directly download the .pkg files under “Stable Releases” and then install them.) Then, you need to set a mounting folder (need to be empty). For example, mkdir ~/Research/kungpao. Finally, it goes like sshfs jiaxuanli@kungpao.ucsc.edu:/Users/jiaxuanli/ /Users/jiaxuanli/Research/kungpao/ -ovolname=kungpao. You will see a disk icon in folder ~/Research. To unmount this “disk”, type diskutil unmount ~/Research/kungpao/. Screen screen enables me to use multiple windows in the background when using ssh. Make a new screen window using screen -S Jiaxuan; then do whatever you want in that terminal; and detach that window using Ctrl-a + d. After got detached, the screen terminal is still running in the background. You can reconnect that terminal with screen -r Jiaxuan." />
<link rel="canonical" href="http://localhost:4000/blog/2019/06/HowToPython" />
<meta property="og:url" content="http://localhost:4000/blog/2019/06/HowToPython" />
<meta property="og:site_name" content="Jiaxuan Li 李嘉轩" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-06-25T17:40:00-04:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@AstroJacobLi" />
<meta name="twitter:creator" content="@Jiaxuan Li" />
<script type="application/ld+json">
{"description":"Useful Resources MIT课程：计算机科学“补漏”课 Python for Astronomers Data Visualization Book: Fundamentals of Data Visualization Really really nice book on principles of plotting and visualizing data. Like it! I will post some content below later. Other packages for plot mpld3: renderer interactive figures (using d3) for Matplotlib code. Quite nice, though incomplete. Worth trying! Altair is a relatively new declarative visualization library for Python. It’s easy to use and makes great looking plots, however the ability to customize those plots is not nearly as powerful as in Matplotlib. plot.ly can generate nice plots - this used to be a paid service only but was recently open sourced. Looks fancy! ipympl introduces interactive widgets of matplotlib in Jupyter notebook and JupyterLab. Incredible cheat sheet for Matplotlib! `Matplotlib` cheatsheet And here are some commands in common use. %matplotlib inline %load_ext autoreload %autoreload 2 from IPython.display import clear_output plt.rcParams[&#39;figure.dpi&#39;] = 200.0 plt.rcParams[&#39;figure.facecolor&#39;] = &#39;w&#39; plt.rcParams[&#39;font.family&#39;] = &#39;serif&#39; plt.rcParams[&#39;font.size&#39;] = 25.0 plt.rcParams[&#39;text.usetex&#39;] = True fig, ax = plt.subplots(1, 2, figsize=(10, 10)) # Two columns ax.tick_params(direction=&#39;in&#39;) # Set tick direction to &#39;in&#39; ax2.get_shared_y_axes().join(ax1, ax2) # Share axis ax.axis(&#39;off&#39;) # No frame when showing images plt.savefig(&#39;xxx.png&#39;, dpi=200, bbox_inches=&#39;tight&#39;) # Save without empty margin # If you find your figure too large, pass `rasterized=True` to `plt.savefig()`. How to create a zoom-in inset in a figure? Useful Python packages in astrophysics: Here I only list several nice packages in astrophysics research. For more please check my GitHub stars and GitHub astrophysics and astronomy topics. taotie: A curated collection of resources for astrophysical research, best tutorial for anyone in this field! unagi: Search and download data from Hyper Suprime-Cam (HSC) Subaru Strategic Survey (SSP). Useful for people working with HSC data. photutils: Astropy package for source detection and photometry, basically substitutes of many IRAF functions. galsim: Galaxy image simulation tool, broadly used in weak lensing and mock tests in galaxy research. prospector: Python code for Stellar Population Inference from Spectra and SEDs. sedpy: Utilities for astronomical spectral energy distributions. healpy: It is a package dealing with data on a sphere. It can map every direction to a pixel position, and vice versa. It can also calculate power spectrum of things like CMB. Although it’s super useful, its python documentation is really unfriendly for beginners. starry: very cool package that can calculate light curves of transits and secondary eclipses of exoplanets, light curves of eclipsing binaries, rotational phase curves of exoplanets, light curves of planet-planet and planet-moon occultations, and more. A very cool tutorial: A map of the hot jupiter HD 189733b. cosmology: cosmology package based on C, written by esheldon. Fast calculate distances. It can also be replaced by astropy.cosmology. corner: A package of drawing corner diagrams of MCMC and 2d histogram. It’s very easy to use and has many options. Good tool! You can find some examples in the SN cosmology.ipynb. Song Huang also uses corner to “explore” data: plot everything with everything. It can check the dependence between variables directly. Example by Song Huang: import corner sdss_labels = [ r&#39;$u-g$&#39;, r&#39;$g-i$&#39;, r&#39;$\\log \\mathrm{EW}_{\\mathrm{H}\\alpha}$&#39;, r&#39;$\\log \\mathrm{EW}_{\\mathrm{H}\\beta}$&#39;, r&#39;$\\log \\mathrm{EW}_{[\\mathrm{OIII}]}$&#39; ] sdss_corner = corner.corner( sdss_obs, bins=15, color=plt.get_cmap(&#39;coolwarm&#39;)(0.9), smooth=0.5, labels=sdss_labels, label_kwargs={&#39;fontsize&#39;: 22}, quantiles=[0.16, 0.5, 0.84], plot_contours=True, fill_contours=True, show_titles=True, title_kwargs={&quot;fontsize&quot;: 18}, hist_kwargs={&quot;histtype&quot;: &#39;stepfilled&#39;, &quot;alpha&quot;: 0.8, &quot;edgecolor&quot;: &quot;none&quot;}, use_math_text=True) sdss_corner.set_size_inches(14, 14) multiprocess.Pool: simple tool to run your loop tasks on multiple cores. This is embedded in python itself, and goes like below. For more complicated usage (multiple arguments as input), please refer to the documentation. from multiprocessing import Pool def run_SBP(obj): slug.run_SBP(obj) print(&#39;Number of processor to use:&#39;) n_jobs = int(input()) pool = Pool(n_jobs) pool.map(run_SBP, obj_cat) joblib: an awesome tool of building pipelines in python. Just like a superior pickle, it can dump and load functions and data (especially large data arrays) efficiently. It can also distribute loop tasks to multiple processors. See the usages below: # Parallel computing from joblib import Parallel, delayed def run_SBP(obj): slug.run_SBP(obj) n_jobs = 4 with Parallel(n_jobs=n_jobs, backend=&#39;loky&#39;) as parallel: parallel(delayed(run_SBP)(obj) for obj in obj_cat) There are various backends for this Parallel function, such as loky, threading and also multiprocessing as stated above. # Dump and load from sklearn.neighbors import KNeighborsClassifier knn = KNeighborsClassifier() knn.fit(X_train, y_train) print(metrics.classification_report(y_test, knn.predict(X_test))) # After training a classifier using scikit-learn, # you want to dump it and use it next time. import joblib joblib.dump(knn, &#39;./clf_cache/knn.joblib&#39;) # If you want to dump the file after compressing, use this. joblib.dump(knn, &#39;./clf_cache/knn.joblib.compress&#39;, compress=True) ipyparallel: Using IPython for parallel computing Tricks Useful packages fire: Python Fire is a library for automatically generating command line interfaces (CLIs) from absolutely any Python object. celluloid: Easy Matplotlib Animation Build your package How to write requirements.txt for a package How to write documentation using sphinx and publish using Readthedocs. Python Packaging User Guider (PyPI): note that when pushing your local files in dist to PyPI, you only need to do python3 -m twine upload dist/*. Don’t forget to add non-Python files in MANIFEST.in and setup.py. Jupyter Notebook &amp; Jupyter Lab No matter under macOs or Linux, or even under Windows, you’ll find that a quick check of Jupiter Notebook is hard and cumbersome. You need to open jupyter notebook in this folder to check, then terminate this thread. However, using a new tool ipynb-quicklook and a new app Jupyter Notebook Viewer, things get much more easier (under macOS and linux). Simply press space and check your notebooks! The following are some other tricks involved when using jupyter notebook. Command + click: multiple cursors in a cell. %load_ext autoreload: import the IPython extension called autoreload. Then %autoreload 2 will reload every module again automatically before executing. %%time: Magic command to time your cell for a single run. Useful! %%timeit: this command can be used to test your code’s performance. It runs your cell for many times and calculate the mean time consumed. %matplotlib inline: show Matplotlib figures inline. Useful! %matplotlib qt: show Matplotlib figures outside in a Qt interface, in which you can check positions and corresponding value of points. %run ./two-histograms.ipynb: this will run the notebook directly and shows every output from that notebook under this cell. %load ./download_tri_color_images.py: load the functions and constants defined in the input python file, and run this file. %config InlineBackend.figure_format =&#39;retina&#39;: show high resolution figures for Mac Retina screen. This won’t affect the figure which is saved, it only affect the figure which is showed using plt.show(). _ means the previous output. By adding ; in the end of a command, it will suppress the useless output of a function. Basic shell commands: ! is external shell command, and &amp; is to run this command as background. Click + control: Jupyter supports multiple cursors, similar to Sublime Text. (Use alt on Windows) %debug magic command: when you encounter an error, type this magic command in a new cell and run it. Type n to run the next line of code, type c to continue until the next breakpoint, and type q to quit. This magic command can also be used to check the value of variables, just type the name of the variable. from IPython.core.debugger import set_trace: use set_trace() to set a breakpoint in your cell or code block. The code will stop at the breakpoint and give you the chance to inspect variables. Jupyter extensions: my favorite extensions are Codefolding, Nofity and Code prettify. You can simply install it by pip install jupyter_contrib_nbextensions or conda install -c conda-forge jupyter_contrib_nbextensions. Recently I switched to jupyter lab! It is faster than jupyter notebook. Formatting strings Tutorial: https://pyformat.info. I often use length = {:.2f}.format(3.1415) or name = &quot;DECaLS_{}&quot;.format(&#39;g_band&#39;}. In Python 3.6, f-string can be used: flength = {len(obj_cat):3d}. RegEx: Regular Expression Tutorial: https://github.com/ziishaned/learn-regex. Using Tqdm to show progress See https://github.com/tqdm/tqdm/wiki/How-to-make-a-great-Progress-Bar. from slug.imutils import TqdmUpTo url = imutils.gen_url_hsc_s18a(obj[&#39;RA&#39;], obj[&#39;Dec&#39;], size * slug.HSC_pixel_scale, size * slug.HSC_pixel_scale, band)[0] #urllib.request.urlretrieve(url, filename, imutils.reporthook) with TqdmUpTo(unit=&#39;B&#39;, unit_scale=True, miniters=1, desc=prefix) as t: # all optional kwargs urllib.request.urlretrieve(url, filename=filename, reporthook=t.update_to, data=None) Unix Rsync We use rsync to transfer files between two computers. It often goes like: rsync -avz --progress jiaxuanli@kungpao.ucsc.edu:/Users/jiaxuanli/Document/xxx.fits ~/Research/ SSH SSH is a tunnel through which you can connect with another computer (with fixed IP). It often goes like: Login kungpao: ssh -A -Y jiaxuanli@kungpao.ucsc.edu. However you can set alias for this command by write alias login_kungpao=&#39;ssh -A -Y jiaxuanli@kungpao.ucsc.edu&#39; in your .bash_profile. Using the internet of kungpao: ssh -g -qfnNT -D 7070 jiaxuanli@kungpao.ucsc.edu and then set the port of SOCKS to be 7070. Using Jupiter Notebook on kungpao but control it locally: ssh -Y -N -L localhost:9999:localhost:9999 jiaxuanli@kungpao.ucsc.edu (on your laptop); jupyter notebook --no-browser --port=9999 (on your server kungpao). The SSH session may be timeout very soon, check here for solutions. SSHFS When you find that using ssh and rsync is not convenient to see what you did, you need sshfs to mount your remote server to the local directory. First, you need to download and install OSXFUSE and SSHFS on https://osxfuse.github.io (directly download the .pkg files under “Stable Releases” and then install them.) Then, you need to set a mounting folder (need to be empty). For example, mkdir ~/Research/kungpao. Finally, it goes like sshfs jiaxuanli@kungpao.ucsc.edu:/Users/jiaxuanli/ /Users/jiaxuanli/Research/kungpao/ -ovolname=kungpao. You will see a disk icon in folder ~/Research. To unmount this “disk”, type diskutil unmount ~/Research/kungpao/. Screen screen enables me to use multiple windows in the background when using ssh. Make a new screen window using screen -S Jiaxuan; then do whatever you want in that terminal; and detach that window using Ctrl-a + d. After got detached, the screen terminal is still running in the background. You can reconnect that terminal with screen -r Jiaxuan.","author":{"@type":"Person","name":"Jiaxuan Li"},"@type":"BlogPosting","url":"http://localhost:4000/blog/2019/06/HowToPython","headline":"How to use Python as an astronomer","dateModified":"2019-06-25T17:40:00-04:00","datePublished":"2019-06-25T17:40:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/2019/06/HowToPython"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Jiaxuan Li 李嘉轩</a>


    <nav class="site-nav">

      <a href="#" class="menu-icon menu.open">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>  

    <div class="trigger"><h1>Main Navigation</h1>

 <ul class="menu">

    
    
     <li><a href="/about/" class="page-link">About</a>
    
    </li>
    
    
     <li><a href="/cv/" class="page-link">CV</a>
    
    </li>
    
    
    <li><a href="/research/" class="page-link">Research</a>
    <ul class="sub-menu">
    
    <li><a href="/research/BeyondUDG">Mass-size Outliers</a></li>
    
    </ul>
    
    </li>
    
    
     <li><a href="/blog/" class="page-link">Blog</a>
    
    </li>
    
    
     <li><a href="/portfolio/" class="page-link">Gallery</a>
    
    </li>
    
    
    <li><a href="/miscellany/" class="page-link">Miscellany</a>
    <ul class="sub-menu">
    
    <li><a href="/miscellany/photography">Photography</a></li>
    
    <li><a href="/miscellany/cooking/">Cooking</a></li>
    
    <li><a href="/miscellany/links">Links</a></li>
    
    </ul>
    
    </li>
    
    </ul>


     </div>  
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">
  <header class="post-header">
    <h1 class="post-title">How to use Python as an astronomer</h1>
    <p class="post-meta">Posted on June 25, 2019 by  Jiaxuan Li  

  in
  
  <a href="/categories/#Coding" title="Coding">Coding</a>&nbsp;
  


</p>
  </header>

  <article class="post-content">
    <h2 id="useful-resources">Useful Resources</h2>
<h3 id="mit课程计算机科学补漏课"><a href="https://www.bilibili.com/video/BV1aE41157q6">MIT课程：计算机科学“补漏”课</a></h3>

<h3 id="python-for-astronomers"><a href="https://prappleizer.github.io/">Python for Astronomers</a></h3>

<h1 id="data-visualization">Data Visualization</h1>

<h3 id="book-fundamentals-of-data-visualization"><a href="https://serialmentor.com/dataviz/visualizing-amounts.html">Book: Fundamentals of Data Visualization</a></h3>

<p>Really really nice book on principles of plotting and visualizing data. Like it! I will post some content below later.</p>

<h3 id="other-packages-for-plot">Other packages for plot</h3>

<ul>
  <li><a href="http://mpld3.github.io/notebooks/interactive_legend.html">mpld3</a>: renderer interactive figures (using d3) for Matplotlib code. Quite nice, though incomplete. Worth trying!</li>
  <li><a href="https://github.com/altair-viz/altair">Altair</a> is a relatively new declarative visualization library for Python. It’s easy to use and makes great looking plots, however the ability to customize those plots is not nearly as powerful as in Matplotlib.</li>
  <li><a href="https://plot.ly/">plot.ly</a> can generate nice plots - this used to be a paid service only but was recently open sourced. Looks fancy!</li>
  <li><a href="https://github.com/matplotlib/ipympl">ipympl</a> introduces interactive widgets of matplotlib in Jupyter notebook and JupyterLab.</li>
</ul>

<h3 id="incredible-cheat-sheet-for-matplotlib"><a href="https://github.com/rougier/matplotlib-cheatsheet">Incredible cheat sheet for Matplotlib!</a></h3>
<dl class="wp-caption aligncenter" style="width: 950px">

<dt><a href=""><img class="" src="/images/matplotlib-cheatsheet.png" alt="`Matplotlib` cheatsheet" /></a></dt>

<dd>`Matplotlib` cheatsheet</dd>
</dl>

<p>And here are some commands in common use.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="o">%</span><span class="n">load_ext</span> <span class="n">autoreload</span>
<span class="o">%</span><span class="n">autoreload</span> <span class="mi">2</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">clear_output</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'figure.dpi'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">200.0</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'figure.facecolor'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'w'</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'font.family'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'serif'</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'font.size'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">25.0</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'text.usetex'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="c1"># Two columns
</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s">'in'</span><span class="p">)</span>         <span class="c1"># Set tick direction to 'in'
</span><span class="n">ax2</span><span class="o">.</span><span class="n">get_shared_y_axes</span><span class="p">()</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="c1"># Share axis
</span><span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">'off'</span><span class="p">)</span> <span class="c1"># No frame when showing images
</span><span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">'xxx.png'</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s">'tight'</span><span class="p">)</span> <span class="c1"># Save without empty margin
# If you find your figure too large, pass `rasterized=True` to `plt.savefig()`.
</span></code></pre></div></div>

<p><a href="http://akuederle.com/matplotlib-zoomed-up-inset">How to create a zoom-in inset in a figure?</a></p>

<h1 id="useful-python-packages-in-astrophysics">Useful Python packages in astrophysics:</h1>

<p>Here I only list several nice packages in astrophysics research. For more please check my GitHub <a href="https://github.com/AstroJacobLi?tab=stars">stars</a> and GitHub <a href="https://github.com/topics/astrophysics">astrophysics</a> and <a href="https://github.com/topics/astronomy">astronomy</a> topics.</p>

<ul>
  <li><a href="https://github.com/dr-guangtou/taotie"><code class="highlighter-rouge">taotie</code></a>: A curated collection of resources for astrophysical research, best tutorial for anyone in this field!</li>
  <li><a href="https://github.com/dr-guangtou/unagi"><code class="highlighter-rouge">unagi</code></a>: Search and download data from Hyper Suprime-Cam (HSC) Subaru Strategic Survey (SSP). Useful for people working with HSC data.</li>
  <li><a href="https://github.com/astropy/photutils"><code class="highlighter-rouge">photutils</code></a>: Astropy package for source detection and photometry, basically substitutes of many IRAF functions.</li>
  <li><a href="https://github.com/GalSim-developers/GalSim"><code class="highlighter-rouge">galsim</code></a>: Galaxy image simulation tool, broadly used in weak lensing and mock tests in galaxy research.</li>
  <li><a href="https://github.com/bd-j/prospector"><code class="highlighter-rouge">prospector</code></a>: Python code for Stellar Population Inference from Spectra and SEDs.</li>
  <li>
    <p><a href="https://github.com/bd-j/sedpy"><code class="highlighter-rouge">sedpy</code></a>: Utilities for astronomical spectral energy distributions.</p>
  </li>
  <li><a href="https://healpy.readthedocs.io/en/latest/install.html"><code class="highlighter-rouge">healpy</code></a>: It is a package dealing with data on a sphere. It can map every direction to a pixel position, and vice versa. It can also calculate power spectrum of things like CMB. Although it’s super useful, its python documentation is really unfriendly for beginners.</li>
  <li><a href="https://rodluger.github.io/starry/tutorials/hd189.html"><code class="highlighter-rouge">starry</code></a>: very cool package that can calculate light curves of transits and secondary eclipses of exoplanets, light curves of eclipsing binaries, rotational phase curves of exoplanets, light curves of planet-planet and planet-moon occultations, and more. A very cool tutorial: <a href="https://rodluger.github.io/starry/tutorials/hd189.html">A map of the hot jupiter HD 189733b</a>.</li>
  <li><a href="https://github.com/esheldon/cosmology"><code class="highlighter-rouge">cosmology</code></a>: cosmology package based on C, written by esheldon. Fast calculate distances. It can also be replaced by <a href="http://docs.astropy.org/en/stable/cosmology/index.html#module-astropy.cosmology"><code class="highlighter-rouge">astropy.cosmology</code></a>.</li>
  <li>
    <p><a href="https://corner.readthedocs.io/en/latest/"><code class="highlighter-rouge">corner</code></a>: A package of drawing corner diagrams of MCMC and 2d histogram. It’s very easy to use and has many options. Good tool! You can find some examples in the <code class="highlighter-rouge">SN cosmology.ipynb</code>. <a href="http://dr-guangtou.github.io">Song Huang</a> also uses <code class="highlighter-rouge">corner</code> to “explore” data: plot everything with everything. It can check the dependence between variables directly. Example by Song Huang:</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">corner</span> 
<span class="n">sdss_labels</span> <span class="o">=</span> <span class="p">[</span>
      <span class="s">r'$u-g$'</span><span class="p">,</span> <span class="s">r'$g-i$'</span><span class="p">,</span>
      <span class="s">r'$\log \mathrm{EW}_{\mathrm{H}\alpha}$'</span><span class="p">,</span>
      <span class="s">r'$\log \mathrm{EW}_{\mathrm{H}\beta}$'</span><span class="p">,</span>
      <span class="s">r'$\log \mathrm{EW}_{[\mathrm{OIII}]}$'</span>
  <span class="p">]</span>

<span class="n">sdss_corner</span> <span class="o">=</span> <span class="n">corner</span><span class="o">.</span><span class="n">corner</span><span class="p">(</span>
      <span class="n">sdss_obs</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s">'coolwarm'</span><span class="p">)(</span><span class="mf">0.9</span><span class="p">),</span>
      <span class="n">smooth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">sdss_labels</span><span class="p">,</span>
      <span class="n">label_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'fontsize'</span><span class="p">:</span> <span class="mi">22</span><span class="p">},</span>
      <span class="n">quantiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.16</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.84</span><span class="p">],</span>
      <span class="n">plot_contours</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill_contours</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
      <span class="n">show_titles</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">title_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">"fontsize"</span><span class="p">:</span> <span class="mi">18</span><span class="p">},</span>
      <span class="n">hist_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">"histtype"</span><span class="p">:</span> <span class="s">'stepfilled'</span><span class="p">,</span> <span class="s">"alpha"</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span> <span class="s">"edgecolor"</span><span class="p">:</span> <span class="s">"none"</span><span class="p">},</span>
      <span class="n">use_math_text</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">sdss_corner</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><a href="https://docs.python.org/3.7/library/multiprocessing.html"><code class="highlighter-rouge">multiprocess.Pool</code></a>: simple tool to run your loop tasks on multiple cores. This is embedded in <code class="highlighter-rouge">python</code> itself, and goes like below. For more complicated usage (multiple arguments as input), please refer to the documentation.</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Pool</span>
<span class="k">def</span> <span class="nf">run_SBP</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
<span class="n">slug</span><span class="o">.</span><span class="n">run_SBP</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">'Number of processor to use:'</span><span class="p">)</span>
<span class="n">n_jobs</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>

<span class="n">pool</span> <span class="o">=</span> <span class="n">Pool</span><span class="p">(</span><span class="n">n_jobs</span><span class="p">)</span>
<span class="n">pool</span><span class="o">.</span><span class="nb">map</span><span class="p">(</span><span class="n">run_SBP</span><span class="p">,</span> <span class="n">obj_cat</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><a href="https://joblib.readthedocs.io/en/latest/parallel.html"><code class="highlighter-rouge">joblib</code></a>: an awesome tool of building pipelines in python. Just like a superior <code class="highlighter-rouge">pickle</code>, it can dump and load functions and data (especially large data arrays) efficiently. It can also distribute loop tasks to multiple processors. See the usages below:</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Parallel computing
</span><span class="kn">from</span> <span class="nn">joblib</span> <span class="kn">import</span> <span class="n">Parallel</span><span class="p">,</span> <span class="n">delayed</span>
<span class="k">def</span> <span class="nf">run_SBP</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
<span class="n">slug</span><span class="o">.</span><span class="n">run_SBP</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

<span class="n">n_jobs</span> <span class="o">=</span> <span class="mi">4</span>
<span class="k">with</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">n_jobs</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s">'loky'</span><span class="p">)</span> <span class="k">as</span> <span class="n">parallel</span><span class="p">:</span>
<span class="n">parallel</span><span class="p">(</span><span class="n">delayed</span><span class="p">(</span><span class="n">run_SBP</span><span class="p">)(</span><span class="n">obj</span><span class="p">)</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">obj_cat</span><span class="p">)</span>
</code></pre></div>    </div>

    <p>There are various backends for this <code class="highlighter-rouge">Parallel</code> function, such as <code class="highlighter-rouge">loky</code>, <code class="highlighter-rouge">threading</code> and also <code class="highlighter-rouge">multiprocessing</code> as stated above.</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Dump and load
</span><span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsClassifier</span>
<span class="n">knn</span> <span class="o">=</span> <span class="n">KNeighborsClassifier</span><span class="p">()</span>
<span class="n">knn</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">metrics</span><span class="o">.</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">knn</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)))</span>

<span class="c1"># After training a classifier using scikit-learn, 
# you want to dump it and use it next time.
</span><span class="kn">import</span> <span class="nn">joblib</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">knn</span><span class="p">,</span> <span class="s">'./clf_cache/knn.joblib'</span><span class="p">)</span>
<span class="c1"># If you want to dump the file after compressing, use this.
</span><span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">knn</span><span class="p">,</span> <span class="s">'./clf_cache/knn.joblib.compress'</span><span class="p">,</span> <span class="n">compress</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>  
</code></pre></div>    </div>
  </li>
  <li><a href="https://ipyparallel.readthedocs.io/en/latest/index.html"><code class="highlighter-rouge">ipyparallel</code></a>: Using IPython for parallel computing</li>
</ul>

<h1 id="tricks">Tricks</h1>
<h3 id="useful-packages">Useful packages</h3>
<ul>
  <li><a href="https://github.com/google/python-fire"><code class="highlighter-rouge">fire</code></a>: Python Fire is a library for automatically generating command line interfaces (CLIs) from absolutely any Python object.</li>
  <li><a href="https://github.com/jwkvam/celluloid/"><code class="highlighter-rouge">celluloid</code></a>: Easy Matplotlib Animation</li>
</ul>

<h3 id="build-your-package">Build your package</h3>
<ul>
  <li><a href="https://pip.readthedocs.io/en/1.1/requirements.html#requirements-file-format">How to write <code class="highlighter-rouge">requirements.txt</code> for a package</a></li>
  <li><a href="https://pythonhosted.org/an_example_pypi_project/sphinx.html">How to write documentation using <code class="highlighter-rouge">sphinx</code></a> and <a href="https://docs.readthedocs.io/page/intro/getting-started-with-sphinx.html">publish using <code class="highlighter-rouge">Readthedocs</code></a>.</li>
  <li><a href="https://packaging.python.org">Python Packaging User Guider (PyPI)</a>: note that when pushing your local files in <code class="highlighter-rouge">dist</code> to PyPI, you only need to do <code class="highlighter-rouge">python3 -m twine upload dist/*</code>. Don’t forget to add non-Python files in <code class="highlighter-rouge">MANIFEST.in</code> and <code class="highlighter-rouge">setup.py</code>.</li>
</ul>

<h3 id="jupyter-notebook--jupyter-lab">Jupyter Notebook &amp; Jupyter Lab</h3>

<p>No matter under macOs or Linux, or even under Windows, you’ll find that a quick check of Jupiter Notebook is hard and cumbersome. You need to open <code class="highlighter-rouge">jupyter notebook</code> in this folder to check, then terminate this thread. However, using a new tool <a href="https://github.com/tuxu/ipynb-quicklook/">ipynb-quicklook</a> and a new app <a href="https://github.com/tuxu/nbviewer-app">Jupyter Notebook Viewer</a>, things get much more easier (under macOS and linux). Simply press <code class="highlighter-rouge">space</code> and check your notebooks!</p>

<p>The following are some other tricks involved when using <code class="highlighter-rouge">jupyter notebook</code>.</p>

<ul>
  <li><code class="highlighter-rouge">Command + click</code>: multiple cursors in a cell.</li>
  <li><code class="highlighter-rouge">%load_ext autoreload</code>: import the IPython extension called <code class="highlighter-rouge">autoreload</code>. Then <code class="highlighter-rouge">%autoreload 2</code> will reload every module again automatically before executing.</li>
  <li><code class="highlighter-rouge">%%time</code>: Magic command to time your cell for a single run. Useful!</li>
  <li><code class="highlighter-rouge">%%timeit</code>: this command can be used to test your code’s performance. It runs your cell for many times and calculate the mean time consumed.</li>
  <li><code class="highlighter-rouge">%matplotlib inline</code>: show Matplotlib figures inline. Useful!</li>
  <li><code class="highlighter-rouge">%matplotlib qt</code>: show Matplotlib figures outside in a <code class="highlighter-rouge">Qt</code> interface, in which you can check positions and corresponding value of points.</li>
  <li><code class="highlighter-rouge">%run ./two-histograms.ipynb</code>: this will run the notebook directly and shows every output from that notebook under this cell.</li>
  <li><code class="highlighter-rouge">%load ./download_tri_color_images.py</code>: load the functions and constants defined in the input python file, and run this file.</li>
  <li><code class="highlighter-rouge">%config InlineBackend.figure_format ='retina'</code>: show high resolution figures for Mac Retina screen. This won’t affect the figure which is saved, it only affect the figure which is showed using <code class="highlighter-rouge">plt.show()</code>.</li>
  <li><code class="highlighter-rouge">_</code> means the previous output. By adding <code class="highlighter-rouge">;</code> in the end of a command, it will suppress the useless output of a function.
    <ul>
      <li>Basic shell commands: <code class="highlighter-rouge">!</code> is external shell command, and <code class="highlighter-rouge">&amp;</code> is to run this command as background.</li>
    </ul>
  </li>
  <li>Click + <code class="highlighter-rouge">control</code>: Jupyter supports multiple cursors, similar to Sublime Text. (Use <code class="highlighter-rouge">alt</code> on Windows)</li>
  <li><code class="highlighter-rouge">%debug</code> magic command: when you encounter an error, type this magic command in a new cell and run it. Type <code class="highlighter-rouge">n</code> to run the next line of code, type <code class="highlighter-rouge">c</code> to continue until the next breakpoint, and type <code class="highlighter-rouge">q</code> to quit. This magic command can also be used to check the value of variables, just type the name of the variable.</li>
  <li><code class="highlighter-rouge">from IPython.core.debugger import set_trace</code>: use <code class="highlighter-rouge">set_trace()</code> to set a breakpoint in your cell or code block. The code will stop at the breakpoint and give you the chance to inspect variables.</li>
  <li><a href="https://github.com/ipython-contrib/jupyter_contrib_nbextensions">Jupyter extensions</a>: my favorite extensions are  Codefolding, Nofity and Code prettify. You can simply install it by <code class="highlighter-rouge">pip install jupyter_contrib_nbextensions</code> or <code class="highlighter-rouge">conda install -c conda-forge jupyter_contrib_nbextensions</code>.</li>
  <li>Recently I switched to <code class="highlighter-rouge">jupyter lab</code>! It is faster than <code class="highlighter-rouge">jupyter notebook</code>.</li>
</ul>

<h3 id="formatting-strings">Formatting strings</h3>

<p>Tutorial: <a href="https://pyformat.info">https://pyformat.info</a>. I often use <code class="highlighter-rouge">length = {:.2f}.format(3.1415)</code> or <code class="highlighter-rouge">name = "DECaLS_{}".format('g_band'}</code>.</p>

<p>In Python 3.6, f-string can be used: f<code class="highlighter-rouge">length = {len(obj_cat):3d}</code>.</p>

<h3 id="regex-regular-expression">RegEx: Regular Expression</h3>

<p>Tutorial: <a href="https://github.com/ziishaned/learn-regex">https://github.com/ziishaned/learn-regex</a>.</p>

<h3 id="using-tqdm-to-show-progress">Using <code class="highlighter-rouge">Tqdm</code> to show progress</h3>
<p>See <a href="https://github.com/tqdm/tqdm/wiki/How-to-make-a-great-Progress-Bar">https://github.com/tqdm/tqdm/wiki/How-to-make-a-great-Progress-Bar</a>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">slug.imutils</span> <span class="kn">import</span> <span class="n">TqdmUpTo</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">imutils</span><span class="o">.</span><span class="n">gen_url_hsc_s18a</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="s">'RA'</span><span class="p">],</span> <span class="n">obj</span><span class="p">[</span><span class="s">'Dec'</span><span class="p">],</span> 
                       <span class="n">size</span> <span class="o">*</span> <span class="n">slug</span><span class="o">.</span><span class="n">HSC_pixel_scale</span><span class="p">,</span> 
                       <span class="n">size</span> <span class="o">*</span> <span class="n">slug</span><span class="o">.</span><span class="n">HSC_pixel_scale</span><span class="p">,</span> <span class="n">band</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1">#urllib.request.urlretrieve(url, filename, imutils.reporthook)
</span><span class="k">with</span> <span class="n">TqdmUpTo</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s">'B'</span><span class="p">,</span> <span class="n">unit_scale</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">miniters</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>  <span class="c1"># all optional kwargs
</span>    <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                       <span class="n">reporthook</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">update_to</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</code></pre></div></div>

<h1 id="unix">Unix</h1>

<h4 id="rsync">Rsync</h4>

<p>We use <code class="highlighter-rouge">rsync</code> to transfer files between two computers. It often goes like:</p>

<p><code class="highlighter-rouge">rsync -avz --progress jiaxuanli@kungpao.ucsc.edu:/Users/jiaxuanli/Document/xxx.fits ~/Research/</code></p>

<h4 id="ssh">SSH</h4>

<p>SSH is a tunnel through which you can connect with another computer (with fixed IP). It often goes like:</p>

<p>Login kungpao: <code class="highlighter-rouge">ssh -A -Y jiaxuanli@kungpao.ucsc.edu</code>. However you can set alias for this command by write <code class="highlighter-rouge">alias login_kungpao='ssh -A -Y jiaxuanli@kungpao.ucsc.edu'</code> in your <code class="highlighter-rouge">.bash_profile</code>.</p>

<p>Using the internet of kungpao: <code class="highlighter-rouge">ssh -g -qfnNT -D 7070 jiaxuanli@kungpao.ucsc.edu</code> and then set the port of SOCKS to be 7070.</p>

<p>Using Jupiter Notebook on kungpao but control it locally: <code class="highlighter-rouge">ssh -Y -N -L localhost:9999:localhost:9999 jiaxuanli@kungpao.ucsc.edu</code> (on your laptop); <code class="highlighter-rouge">jupyter notebook --no-browser --port=9999</code> (on your server kungpao).</p>

<p>The SSH session may be timeout very soon, check <a href="https://bjornjohansen.no/ssh-timeout">here</a> for solutions.</p>

<h4 id="sshfs">SSHFS</h4>

<p>When you find that using <code class="highlighter-rouge">ssh</code> and <code class="highlighter-rouge">rsync</code> is not convenient to see what you did, you need <code class="highlighter-rouge">sshfs</code> to mount your remote server to the local directory.</p>

<p>First, you need to download and install <code class="highlighter-rouge">OSXFUSE</code> and <code class="highlighter-rouge">SSHFS</code> on <a href="https://osxfuse.github.io">https://osxfuse.github.io</a> (directly download the <code class="highlighter-rouge">.pkg</code> files under “Stable Releases” and then install them.) Then, you need to set a mounting folder (need to be empty). For example, <code class="highlighter-rouge">mkdir ~/Research/kungpao</code>.</p>

<p>Finally, it goes like <code class="highlighter-rouge">sshfs jiaxuanli@kungpao.ucsc.edu:/Users/jiaxuanli/ /Users/jiaxuanli/Research/kungpao/ -ovolname=kungpao</code>.</p>

<p>You will see a disk icon in folder <code class="highlighter-rouge">~/Research</code>. To unmount this “disk”, type <code class="highlighter-rouge">diskutil unmount ~/Research/kungpao/</code>.</p>

<h4 id="screen">Screen</h4>

<p><code class="highlighter-rouge">screen</code> enables me to use multiple windows in the background when using <code class="highlighter-rouge">ssh</code>.</p>

<p>Make a new screen window using <code class="highlighter-rouge">screen -S Jiaxuan</code>; then do whatever you want in that terminal; and detach that window using <code class="highlighter-rouge">Ctrl-a + d</code>. After got detached, the screen terminal is still running in the background. You can reconnect that terminal with <code class="highlighter-rouge">screen -r Jiaxuan</code>.</p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

<!--     <h2 class="footer-heading">Jiaxuan Li 李嘉轩</h2> -->

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-2">
        <br>
        <ul class="contact-list">
          <li><strong>Jiaxuan Li 李嘉轩</strong></li>
          <li>Graduate Student</li>
          <li><a href="mailto:jiaxuanl@princeton.edu">jiaxuanl@princeton.edu</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <br>
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/AstroJacobLi">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">AstroJacobLi</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/AstroJacobLi">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">AstroJacobLi</span>
            </a>
          </li>
          
          
          <li>
            <a href="https://orcid.org"><img alt="ORCID logo" src="https://orcid.org/sites/default/files/images/orcid_16x16.png" width="16" height="16" hspace="0" /></a> <a href="https://orcid.org/0000-0001-9592-4190"> <font size="-1">0000-0001-9592-4190</font></a>
          </li>

          

          
        </ul>
      </div>

      <div class="footer-col  footer-col-5">
        <br>
         <p class="text">
          Department of Astrophysical Sciences<br>
          012 Peyton Hall, 4 Ivy Lane,<br>
          Princeton, NJ 08544, USA<br>
      </div>

      <div class="footer-col  footer-col-2">
         <script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5umlf3qf2sp&amp;m=0&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33" async="async"></script>
      </div>

    </div>

  </div>

</footer>

  </body>

</html>
<!-- d.s.m.s.050600.062508.030515.080516.030818 | "Baby, I'm Yours" -->